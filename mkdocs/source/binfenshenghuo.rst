
第八章 缤纷生活跨行还款
================================================== 

自动还款巡查与应急手册


8.1 每日巡查方法               
--------------------------

1、连接数据库执行下列查询语句判断是否有当日数据::

  select * from BCSS_DEBIT_BUSINESS 
  where req_respcode <> '00' 
  or inq_respcode <> '00' 
  order by file_insert_time desc;

如果有当日错误数据，请根据【req_respcode】和【inq_respcode】值判断处理方法，
目前已知错误状况及处理办法:

①req_respcode=’00’并且inq_respcode=’37’请参照：8.2节【处理方法1】:

2、登录应用节点1，进入如下目录:
     /bcss/debit/load/
     
查看上路径下是否有文件，如果没有，正常；如果有，隔半小时后再次查询,

如果还有文件则为异常情况，请参照：8.2节【处理方法2】;

3、登录应用节点1，进入如下目录：
     /bcss/debit/up/
     
查看上路径下是否有文件，如果没有，正常；如果有，隔半小时后再次查询，
如果还有文件则为异常情况，请参照：8.2节【处理方法2】。

8.2 应急处理方法
--------------------------

【处理方法1】；
此问题为银联未返回代付结果文件，请按如下流程处理：

  1请联系银联同事，要到代付结果文件，文件名称格式示例：
    DK01040000000000000000000201801180100O.txt
    将日期（YYYYMMDD）部分作修改，如果作业时间段在中午12点~24点之间，
    将日期修改为明天的日期，其他时间段修改为当日日期；
    日期后面4位为文件的批次号，此批次号当日唯一，建议修改为0100、0101等，以保证唯一性。

  2打开代付文件，在第一行增加文件头，文件头内容为：R000000成功[0000000]
  3将文件编码格式修改为u8-uni。（可用UE等文件编辑工具修改）
  4将文件以bin形式上传到/bcss/debit/up/目录下。
  
【处理方法2】：
此问题为代付程序为成功执行，请按如下流程处理：

  1请查看/bcss/debit/logs/目录下最新的log文件，如发现报错信息，请联系bcss相关人员处理。
  2如果上记log文件中违法先异常，请重启代付程序并上报。
  代付程序重启方法为执行下面两个命令

   sh /bcss/ap/batch/BcssDebitStop.sh 
   sh /bcss/ap/batch/BcssDebitStart.sh

     
		  





